# MDXレンダリングシステム使い方マニュアル

## 1. はじめに

このマニュアルは、ビジネススキル百科サイトのMDXレンダリングシステムの使い方を説明するものです。MDXを使用して記事を作成し、目次や広告を挿入する方法について解説します。

## 2. MDXとは

MDX（Markdown + JSX）は、Markdownの中でJSXコンポーネントを使用できるようにした拡張マークダウン形式です。これにより、通常のMarkdownの記法に加えて、Reactコンポーネントを埋め込むことができます。

## 3. 記事の作成方法

### 3.1 Contentfulでの記事作成

1. Contentfulの管理画面にログインします。
2. 「Content」タブを選択します。
3. 「Add Content」ボタンをクリックします。
4. 「Content」コンテンツタイプを選択します。
5. 以下の必須フィールドを入力します：
   - Title: 記事のタイトル
   - Slug: URLに使用されるスラッグ（小文字英数字とハイフンのみ）
   - Content Type: 「記事」を選択
   - Category: カテゴリを選択
6. 以下のオプションフィールドを必要に応じて入力します：
   - Description: 記事の簡単な説明
   - Author: 著者を選択
   - Tags: 関連するタグを選択
   - Thumbnail: サムネイル画像をアップロード
   - Publish Date: 公開日を設定
7. MDX Contentフィールドに記事の本文をMDX形式で入力します。
8. Related Contents: 関連するコンテンツを選択します。
9. Advertisements: 記事に表示する広告を選択します。
10. 「Publish」ボタンをクリックして記事を公開します。

### 3.2 MDXの基本的な書き方

MDXは基本的にMarkdownと同じ記法で書くことができます。以下は基本的な記法の例です：

```mdx
# 見出し1

## 見出し2

### 見出し3

これは**太字**です。これは*斜体*です。

- リスト項目1
- リスト項目2
- リスト項目3

1. 番号付きリスト1
2. 番号付きリスト2
3. 番号付きリスト3

[リンクテキスト](https://example.com)

![画像の代替テキスト](https://example.com/image.jpg)

> これは引用です。
```

### 3.3 MDXコンポーネントの使い方

MDXでは、以下のカスタムコンポーネントを使用できます：

#### 3.3.1 Calloutコンポーネント

情報、警告、成功、エラーなどのメッセージを目立たせるために使用します。

```mdx
<Callout type="info" title="情報">
これは情報を表示するCalloutコンポーネントです。
</Callout>

<Callout type="warning" title="注意">
これは注意を促すCalloutコンポーネントです。
</Callout>

<Callout type="success" title="成功">
これは成功を表すCalloutコンポーネントです。
</Callout>

<Callout type="error" title="エラー">
これはエラーを表示するCalloutコンポーネントです。
</Callout>
```

#### 3.3.2 CodeBlockコンポーネント

コードブロックを表示するために使用します。シンタックスハイライトとコピーボタンが付いています。

```mdx
<CodeBlock language="javascript">
function hello() {
  console.log('Hello, world!');
}
</CodeBlock>

<CodeBlock language="python">
def hello():
    print("Hello, world!")
</CodeBlock>
```

#### 3.3.3 AdPlacementコンポーネント

記事内に広告を挿入するために使用します。

```mdx
<!-- 広告IDを指定して特定の広告を表示 -->
<AdPlacement id="demo-ad-1" position="inline" />

<!-- 広告IDを指定せずにランダムな広告を表示 -->
<AdPlacement position="inline" />
```

## 4. 目次の使い方

記事には自動的に目次が生成されます。目次は以下の2種類があります：

### 4.1 メイン目次

記事の先頭に表示される目次です。すべてのデバイスで表示されます。

### 4.2 サイドバー目次

PCのみ表示される右サイドバーの目次です。メイン目次が画面外に出たときにフェードインして表示されます。

目次は記事内の見出し（`#`、`##`、`###`、`####`）から自動的に生成されるため、記事の構造を適切に設計することが重要です。

## 5. 広告の挿入方法

広告は以下の3つの方法で挿入できます：

### 5.1 インライン広告

MDXコンテンツ内に`<AdPlacement />`コンポーネントを使用して挿入します。

```mdx
ここは記事の本文です。

<AdPlacement id="demo-ad-1" position="inline" />

ここは記事の続きです。
```

### 5.2 サイドバー広告

サイドバー広告は自動的に表示されます。Contentfulの記事編集画面で「Advertisements」フィールドに広告を関連付けることで、サイドバーに表示される広告を設定できます。

### 5.3 フッター広告

フッター広告は記事の最後に自動的に表示されます。Contentfulの記事編集画面で「Advertisements」フィールドに広告を関連付けることで、フッターに表示される広告を設定できます。

## 6. 関連コンテンツの設定

関連コンテンツは、Contentfulの記事編集画面で「Related Contents」フィールドに関連するコンテンツを選択することで設定できます。関連コンテンツは記事の最後に表示されます。

## 7. プレビューの方法

記事を公開する前にプレビューする方法は以下の通りです：

1. Contentfulの記事編集画面で「Save」ボタンをクリックして記事を保存します。
2. 「Preview」ボタンをクリックします。
3. 「Development」を選択します。
4. プレビューページが新しいタブで開きます。

## 8. トラブルシューティング

### 8.1 目次が表示されない

- 記事に見出し（`#`、`##`、`###`、`####`）が含まれているか確認してください。
- 見出しの前後に空行があるか確認してください。

### 8.2 広告が表示されない

- `<AdPlacement />`コンポーネントの記法が正しいか確認してください。
- 指定した広告IDが存在するか確認してください。
- 広告が有効になっているか確認してください。

### 8.3 MDXコンポーネントが正しく表示されない

- コンポーネントの記法が正しいか確認してください。
- コンポーネントの属性（props）が正しく設定されているか確認してください。
- コンポーネントの閉じタグ（`</Component>`）が正しく記述されているか確認してください。
